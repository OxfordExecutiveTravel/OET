<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Oxford Executive Travel — Licensed Chauffeur & Same‑Day Courier</title>
  <meta name="description" content="Premium airport transfers, UK & Europe tours, and same‑day courier from Oxford. Mercedes E‑Class & V‑Class. Fixed quotes, WhatsApp fast‑reply." />
  <link rel="icon" href="/favicon.ico" />
  <!-- Tailwind via CDN (sufficient for Pages/preview; for production you likely already use a build) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {
              50: '#f2fbf7', 100:'#def7eb', 200:'#baf0d6', 300:'#86e4bb', 400:'#45d09a', 500:'#16b67f', 600:'#0f946a', 700:'#0d7457', 800:'#0c5c49', 900:'#0a4b3e'
            }
          }
        }
      }
    }
  </script>
  <style>
    /* Smooth focus outlines */
    .focus-ring:focus{outline:2px solid rgba(20,184,166,.5); outline-offset:2px}
    /* Map placeholder height on mobile */
    #map { min-height: 280px; }
  </style>
</head>
<body class="bg-white text-gray-900">
  <!-- Top bar -->
  <header class="border-b border-gray-100">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-3 flex items-center justify-between gap-4">
      <div class="flex items-center gap-3">
        <img src="/logo.svg" alt="Oxford Executive Travel" class="h-9 w-auto" onerror="this.style.display='none'">
        <div class="text-sm leading-tight">
          <p class="font-semibold">Oxford Executive Travel</p>
          <p class="text-gray-600">Licensed Chauffeur • Same‑day Courier</p>
        </div>
      </div>
      <div class="hidden md:flex items-center gap-3 text-xs text-gray-600">
        <span class="inline-flex items-center gap-1">Payments:</span>
        <!-- Payment marks (inline SVG fallbacks) -->
        <span title="Stripe" class="px-2 py-1 rounded border">Stripe</span>
        <span title="PayPal" class="px-2 py-1 rounded border">PayPal</span>
        <span title="Apple Pay" class="px-2 py-1 rounded border"> Pay</span>
        <span title="Google Pay" class="px-2 py-1 rounded border">G Pay</span>
        <span title="WeChat Pay" class="px-2 py-1 rounded border">WeChat Pay</span>
        <a href="https://wa.me/447344145197" class="ml-4 inline-flex items-center gap-2 rounded-full bg-green-600 px-3 py-1.5 text-white hover:bg-green-700 focus-ring">WhatsApp</a>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="bg-gradient-to-b from-gray-50 to-white">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-10 lg:py-14 grid lg:grid-cols-2 gap-8">
      <div>
        <h1 class="text-3xl sm:text-4xl font-extrabold tracking-tight">Oxford’s trusted airport transfers & private tours</h1>
        <p class="mt-3 text-gray-700 max-w-prose">Mercedes E‑Class & V‑Class • Professional, licensed & insured • Fixed quotes • UK & Europe tours • Same‑day courier & luggage transfers.</p>
        <ul class="mt-4 text-gray-700 space-y-1 list-disc list-inside">
          <li>Heathrow, Gatwick, Stansted, Luton, Birmingham, Bristol</li>
          <li>Cotswolds, Blenheim Palace, Bicester Village, London day trips</li>
          <li>WhatsApp fast‑reply: <a class="underline" href="https://wa.me/447344145197">+44 7344 145197</a></li>
        </ul>
      </div>

      <!-- Booking + Map cards -->
      <div class="grid md:grid-cols-2 gap-6 items-start">
        <!-- Booking card -->
        <div id="mapCard" class="rounded-2xl border border-gray-200 shadow-sm overflow-hidden">
          <form id="bookingForm" class="p-4 sm:p-5">
            <h2 class="text-lg font-semibold">Request a quote / Book</h2>
            <p class="text-sm text-gray-600">We’ll confirm price & availability shortly by email/WhatsApp.</p>

            <!-- Notice injected here -->
            <div id="formNotice" class="hidden"></div>

            <div class="mt-4 grid grid-cols-1 gap-3">
              <input id="pickup" class="w-full rounded-lg border px-3 py-2 focus-ring" placeholder="Pickup (address, airport, hotel) *" />
              <input id="dropoff" class="w-full rounded-lg border px-3 py-2 focus-ring" placeholder="Drop‑off (address, airport, hotel) *" />
              <div class="grid grid-cols-2 gap-3">
                <input id="date" type="date" class="rounded-lg border px-3 py-2 focus-ring" />
                <input id="time" type="time" class="rounded-lg border px-3 py-2 focus-ring" />
              </div>
              <div class="grid grid-cols-2 gap-3">
                <input id="pax" type="number" min="1" max="8" class="rounded-lg border px-3 py-2 focus-ring" placeholder="Passengers *" />
                <input id="bags" type="number" min="0" max="12" class="rounded-lg border px-3 py-2 focus-ring" placeholder="Luggage (bags)" />
              </div>
              <select id="vehicle" class="rounded-lg border px-3 py-2 focus-ring">
                <option value="E‑Class">Mercedes E‑Class (1–3 pax)</option>
                <option value="V‑Class">Mercedes V‑Class (up to 7 pax)</option>
                <option value="Other">Not sure / advise me</option>
              </select>
              <div class="grid grid-cols-2 gap-3">
                <input id="name" class="rounded-lg border px-3 py-2 focus-ring" placeholder="Your name *" />
                <input id="phone" class="rounded-lg border px-3 py-2 focus-ring" placeholder="Phone / WhatsApp *" />
              </div>
              <input id="email" type="email" class="rounded-lg border px-3 py-2 focus-ring" placeholder="Email *" />
              <textarea id="notes" rows="3" class="rounded-lg border px-3 py-2 focus-ring" placeholder="Flight number, child seats, special requirements…"></textarea>
              <!-- GDPR consent -->
              <label class="flex items-start gap-2 text-sm text-gray-700">
                <input id="consent" type="checkbox" class="mt-1"> I agree to be contacted regarding my enquiry and for booking updates.
              </label>
              <!-- Honeypot -->
              <input id="company" name="company" class="hidden" tabindex="-1" autocomplete="off" />

              <button id="submitBtn" class="mt-1 inline-flex items-center justify-center rounded-lg bg-brand-600 px-4 py-2 font-semibold text-white hover:bg-brand-700 disabled:opacity-40" disabled>
                Submit request
              </button>
              <p class="text-xs text-gray-500">By submitting you agree to our <a href="#" class="underline">terms</a> and <a href="#" class="underline">privacy policy</a>.</p>
            </div>
          </form>
        </div>

        <!-- Map card -->
        <div class="rounded-2xl border border-gray-200 shadow-sm overflow-hidden">
          <div id="map" class="w-full h-full bg-gray-100 flex items-center justify-center">
            <div class="p-4 text-center text-gray-600">
              <p class="font-semibold">Google Map</p>
              <p class="text-sm">(Your embedded map / directions appear here.)</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Trust badges / Testimonials -->
  <section class="py-10 border-t border-gray-100">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 grid lg:grid-cols-3 gap-8">
      <div>
        <h3 class="text-xl font-semibold">Why choose us</h3>
        <ul class="mt-3 space-y-2 text-gray-700">
          <li>Licensed by local authority • Fully insured</li>
          <li>Professional chauffeurs • Clean, modern vehicles</li>
          <li>Fixed quotes • Meet & Greet at airports</li>
        </ul>
        <div class="mt-4 flex items-center gap-3 text-sm text-gray-600">
          <a href="https://g.co/kgs/" class="underline">Google Business</a>
          <span>•</span>
          <a href="https://www.tripadvisor.co.uk/" class="underline">Tripadvisor</a>
        </div>
      </div>
      <div class="lg:col-span-2">
        <div class="grid sm:grid-cols-2 gap-4">
          <figure class="rounded-xl border p-4">
            <blockquote class="text-gray-700">“Flawless Heathrow transfer. On time, courteous, and the V‑Class was immaculate.”</blockquote>
            <figcaption class="mt-2 text-sm text-gray-600">— Sarah L.</figcaption>
          </figure>
          <figure class="rounded-xl border p-4">
            <blockquote class="text-gray-700">“Great Oxford → London day tour. Knowledgeable driver and very comfortable ride.”</blockquote>
            <figcaption class="mt-2 text-sm text-gray-600">— Daniel P.</figcaption>
          </figure>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="border-t border-gray-100">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6 text-sm text-gray-600 flex flex-col sm:flex-row items-center justify-between gap-3">
      <p>© <span id="year"></span> Oxford Executive Travel. All rights reserved.</p>
      <div class="flex items-center gap-3">
        <a href="mailto:bookings@oxfordexecutivetravel.co.uk" class="underline">bookings@oxfordexecutivetravel.co.uk</a>
        <span>•</span>
        <a href="tel:+447344145197" class="underline">+44 7344 145197</a>
        <span>•</span>
        <a href="/privacy" class="underline">Privacy</a>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script>
    // Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Enable submit when consent checked
    const consent = document.getElementById('consent');
    const submitBtn = document.getElementById('submitBtn');
    consent.addEventListener('change', () => {
      submitBtn.disabled = !consent.checked;
    });

    // Equalize map card height to booking form (desktop)
    function setMapHeightToForm() {
      const formCard = document.getElementById('mapCard');
      const map = document.getElementById('map');
      if (!formCard || !map) return;
      if (window.innerWidth >= 768) {
        map.style.height = formCard.offsetHeight + 'px';
      } else {
        map.style.height = '320px';
      }
    }
    window.addEventListener('resize', setMapHeightToForm);
    window.addEventListener('load', setMapHeightToForm);

    // Helper
    const get = id => (document.getElementById(id)?.value || '').trim();

    function notify(msg, ok = true) {
      const el = document.getElementById('formNotice');
      el.className = 'mt-3 rounded-lg px-3 py-2 text-sm ' + (ok
        ? 'bg-emerald-50 text-emerald-800 border border-emerald-200'
        : 'bg-rose-50 text-rose-800 border border-rose-200');
      el.textContent = msg;
    }

    document.getElementById('bookingForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      const payload = {
        pickup:  get('pickup'),
        dropoff: get('dropoff'),
        date:    get('date'),
        time:    get('time'),
        pax:     get('pax'),
        bags:    get('bags'),
        vehicle: get('vehicle'),
        name:    get('name'),
        phone:   get('phone'),
        email:   get('email'),
        notes:   get('notes'),
        company: get('company') // honeypot
      };

      const required = ['pickup','dropoff','date','time','pax','vehicle','name','phone','email'];
      for (const k of required) {
        if (!payload[k]) {
          notify('Please fill all required fields.', false);
          return;
        }
      }

      notify('Sending…');
      submitBtn.disabled = true;

      try {
        const res = await fetch('/api/book', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });

        if (!res.ok) {
          const t = await res.text();
          throw new Error(t || 'Request failed');
        }

        notify('Thanks! We\'ve received your request. A confirmation email has been sent to you. We\'ll be in touch with a quote shortly.');
        (e.target).reset();
        consent.checked = false;
        submitBtn.disabled = true;
        setMapHeightToForm();
      } catch (err) {
        console.error(err);
        notify('Sorry — something went wrong. Please WhatsApp or call us and we\'ll sort it.', false);
        submitBtn.disabled = false;
      }
    });
  </script>

  <!--
  =============================
   Cloudflare Pages Function
   Save as: functions/api/book.js
  =============================
  -->
  <!--
  export const onRequestPost = async (ctx) => {
    try {
      const data = await ctx.request.json();

      // Honeypot
      if (data.company && String(data.company).trim() !== '') {
        return new Response(JSON.stringify({ ok: true }), { status: 200, headers: { 'Content-Type': 'application/json' } });
      }

      const required = ['pickup','dropoff','date','time','pax','vehicle','name','phone','email'];
      for (const k of required) {
        if (!data[k] || String(data[k]).trim() === '') {
          return new Response(`Missing field: ${k}`, { status: 400 });
        }
      }

      const subject = `Quote request — ${data.pickup} → ${data.dropoff} (${data.date} ${data.time})`;
      const details = (
        `Pickup: ${data.pickup}\n`+
        `Drop-off: ${data.dropoff}\n`+
        `Date: ${data.date}   Time: ${data.time}\n`+
        `Passengers: ${data.pax}   Luggage: ${data.bags ?? '0'}\n`+
        `Vehicle: ${data.vehicle}\n\n`+
        `Name: ${data.name}\n`+
        `Phone/WhatsApp: ${data.phone}\n`+
        `Email: ${data.email}\n\n`+
        `Notes:\n${data.notes || '-'}`
      );

      const businessEmail = 'bookings@oxfordexecutivetravel.co.uk';
      const fromAddress   = 'no-reply@oxfordexecutivetravel.co.uk';

      const notifyPayload = {
        personalizations: [{ to: [{ email: businessEmail }] }],
        from: { email: fromAddress, name: 'Oxford Executive Travel — Website' },
        subject,
        content: [{ type: 'text/plain', value: details }],
      };

      const autoresponseSubject = 'Thanks — we\'ve got your request ✅';
      const autoresponseBody = (
        `Hi ${data.name},\n\n`+
        `Thanks for contacting Oxford Executive Travel. We\'ve received your booking/quote request and will be in touch shortly with a price and confirmation.\n\n`+
        `Here\'s what you sent:\n${details}\n\n`+
        `Need it urgently? WhatsApp us now: +44 7344 145197\n`+
        `Or call: +44 7344 145197\n\n`+
        `— Oxford Executive Travel\n`+
        `Licensed & Insured • E‑Class & V‑Class\n`+
        `https://oxfordexecutivetravel.co.uk`);

      const customerPayload = {
        personalizations: [{ to: [{ email: data.email }] }],
        from: { email: fromAddress, name: 'Oxford Executive Travel' },
        reply_to: { email: businessEmail, name: 'Oxford Executive Travel' },
        subject: autoresponseSubject,
        content: [{ type: 'text/plain', value: autoresponseBody }],
      };

      const send = (payload) => fetch('https://api.mailchannels.net/tx/v1/send', {
        method: 'POST',
        headers: { 'content-type': 'application/json' },
        body: JSON.stringify(payload),
      });

      const [r1, r2] = await Promise.all([send(notifyPayload), send(customerPayload)]);

      if (!r1.ok) {
        const e = await r1.text();
        return new Response(`Failed to email business inbox: ${e}`, { status: 500 });
      }
      if (!r2.ok) {
        const e = await r2.text();
        return new Response(`Sent to business, but failed to auto-reply to customer: ${e}`, { status: 202 });
      }

      return new Response(JSON.stringify({ ok: true }), { status: 200, headers: { 'Content-Type': 'application/json' } });

    } catch (err) {
      return new Response(`Error: ${err.message}`, { status: 500 });
    }
  };
  -->
</body>
</html>
